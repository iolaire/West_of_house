# Grimoire Frontend

React-based frontend for the West of Haunted House text adventure game.

## Project Structure

```
src/
├── components/     # React components (ImagePane, GameOutput, CommandInput, etc.)
├── services/       # API client and other services
├── hooks/          # Custom React hooks
├── contexts/       # React context providers (SessionManager, etc.)
├── types/          # TypeScript type definitions
├── styles/         # Global styles and CSS variables
├── App.tsx         # Root application component
└── main.tsx        # Application entry point
```

## Technology Stack

- **React 18+**: UI framework with functional components and hooks
- **TypeScript**: Type-safe development with strict mode enabled
- **Vite**: Fast build tool and dev server
- **CSS Modules**: Scoped component styling
- **fast-check**: Property-based testing library

## Development

### Prerequisites

- Node.js >= 20.0.0
- npm >= 10.0.0

### Getting Started

1. Install dependencies:
   ```bash
   npm install
   ```

2. Start development server:
   ```bash
   npm run dev
   ```

3. Open browser to `http://localhost:3000`

### Build for Production

```bash
npm run build
```

The built files will be in the `dist/` directory.

### Preview Production Build

```bash
npm run preview
```

## Configuration

The frontend automatically reads configuration from `amplify_outputs.json` which is generated by Amplify Gen 2 during deployment.

**Automatic Configuration**:
- API Gateway endpoint URL
- AWS region
- Authentication settings

**Optional Environment Variables** (for local development override):
- `VITE_API_BASE_URL`: Override API endpoint for local testing
- `VITE_API_TIMEOUT`: Request timeout in milliseconds
- `VITE_ENABLE_ANALYTICS`: Enable/disable analytics

## Design System

The application uses a haunted, gothic aesthetic with:

- **Colors**: Dark purples, blood reds, aged yellows, ghost whites
- **Typography**: Crimson Text (body), Cinzel (headings), Courier New (commands)
- **Accessibility**: WCAG AA compliant contrast ratios (4.5:1 minimum)
- **Animations**: 3-second dissolve transitions between room images

See `src/styles/variables.css` for the complete design system.

## Key Features

- **Grimoire Interface**: Animated 3D book-like layout
- **Dissolve Transitions**: Smooth 3-second cross-fades between room images
- **Session Persistence**: localStorage-based session management
- **Command History**: Up arrow to recall previous commands
- **Accessibility**: Keyboard navigation, screen reader support, reduced motion support

## Next Steps

Components will be implemented in subsequent tasks:

1. Core data models and types ✓
2. API client service
3. Session management
4. Room image mapping
5. ImagePane component with transitions
6. GameOutput component
7. CommandInput component
8. GrimoireContainer layout
9. Visual design and accessibility

## Testing

Property-based tests will be added using fast-check library with minimum 100 iterations per property.

## Deployment

The frontend will be deployed to AWS Amplify Hosting alongside the backend Lambda functions.
